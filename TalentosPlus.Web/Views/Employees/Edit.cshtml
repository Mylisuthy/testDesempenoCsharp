@model TalentosPlus.Application.DTOs.CreateEmployeeDto
@{
    ViewData["Title"] = "Edit Employee";
}

<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="glass-card">
                <div class="d-flex align-items-center mb-4 border-bottom border-light pb-3">
                    <div class="icon-shape bg-warning text-white rounded-circle p-3 me-3">
                        <i class="fa-solid fa-user-pen fa-lg"></i>
                    </div>
                    <div>
                        <h2 class="h4 text-white fw-bold mb-0">Edit Employee Record</h2>
                        <p class="text-muted mb-0 small">Update the information for the selected employee.</p>
                    </div>
                </div>

                <form asp-action="Edit" asp-route-id="@ViewBag.Id">
                    <h6 class="text-uppercase text-secondary fw-bold small letter-spacing-1 mb-3">Personal Information</h6>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label asp-for="FirstName" class="form-label text-muted small">First Name</label>
                            <input asp-for="FirstName" class="form-control form-control-premium" />
                            <span asp-validation-for="FirstName" class="text-danger small"></span>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label asp-for="LastName" class="form-label text-muted small">Last Name</label>
                            <input asp-for="LastName" class="form-control form-control-premium" />
                            <span asp-validation-for="LastName" class="text-danger small"></span>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label asp-for="DocumentNumber" class="form-label text-muted small">Document ID</label>
                            <input asp-for="DocumentNumber" class="form-control form-control-premium" />
                            <span asp-validation-for="DocumentNumber" class="text-danger small"></span>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label asp-for="Email" class="form-label text-muted small">Email Address</label>
                            <div class="input-group">
                                <span class="input-group-text bg-transparent border-secondary text-secondary"><i class="fa-solid fa-envelope"></i></span>
                                <input asp-for="Email" class="form-control form-control-premium" type="text"/>
                            </div>
                            <span asp-validation-for="Email" class="text-danger small"></span>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <div class="col-md-4 mb-3">
                             <label asp-for="ContactPhone" class="form-label text-muted small">Phone Number</label>
                             <input asp-for="ContactPhone" class="form-control form-control-premium" />
                        </div>
                        <div class="col-md-4 mb-3">
                             <label asp-for="DateOfBirth" class="form-label text-muted small">Date of Birth</label>
                             <input asp-for="DateOfBirth" class="form-control form-control-premium" type="date" />
                        </div>
                        <div class="col-md-4 mb-3">
                             <label asp-for="Address" class="form-label text-muted small">Address</label>
                             <input asp-for="Address" class="form-control form-control-premium" />
                        </div>
                    </div>
                    
                    <div class="row mb-4">
                         <div class="col-md-6 mb-3">
                            <label asp-for="Status" class="form-label text-muted small">Status</label>
                            <select asp-for="Status" class="form-select form-control-premium" asp-items="Html.GetEnumSelectList<TalentosPlus.Domain.Entities.EmployeeStatus>()"></select>
                            <span asp-validation-for="Status" class="text-danger small"></span>
                        </div>
                    </div>

                    <h6 class="text-uppercase text-secondary fw-bold small letter-spacing-1 mb-3 mt-4">Employment Details</h6>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label asp-for="Position" class="form-label text-muted small">Position / Job Title</label>
                            <input asp-for="Position" class="form-control form-control-premium" list="positionsList" />
                            <!-- Reuse datalist from Viewbag -->
                            <datalist id="positionsList">
                                @if (ViewBag.Positions != null)
                                {
                                    foreach (var pos in ViewBag.Positions)
                                    {
                                        <option value="@pos.Name"></option>
                                    }
                                }
                            </datalist>
                            <span asp-validation-for="Position" class="text-danger small"></span>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label asp-for="Salary" class="form-label text-muted small">Monthly Salary</label>
                            <div class="input-group">
                                <span class="input-group-text bg-transparent border-secondary text-white fw-bold">$</span>
                                <input asp-for="Salary" class="form-control form-control-premium" type="number" step="0.01"/>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label asp-for="JoinDate" class="form-label text-muted small">Join Date</label>
                            <input asp-for="JoinDate" class="form-control form-control-premium" type="date"/>
                        </div>
                         <div class="col-md-6 mb-3">
                            <label asp-for="DepartmentId" class="form-label text-muted small">Department</label>
                            <select asp-for="DepartmentId" class="form-select form-control-premium" 
                                    asp-items="@(new SelectList(ViewBag.Departments ?? new List<TalentosPlus.Domain.Entities.Department>(), "Id", "Name"))">
                                <option value="">Select Department...</option>
                            </select>
                            <span asp-validation-for="DepartmentId" class="text-danger small"></span>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label asp-for="EducationLevel" class="form-label text-muted small">Education Level</label>
                            <input asp-for="EducationLevel" class="form-control form-control-premium" placeholder="Select or Type..." list="educationList" />
                            <datalist id="educationList">
                                <option value="Sin estudios"></option>
                                <option value="Bachiller"></option>
                                <option value="Técnico"></option>
                                <option value="Tecnólogo"></option>
                                <option value="Título Universitario"></option>
                                <option value="Especialización"></option>
                                <option value="Maestría"></option>
                                <option value="Doctorado"></option>
                                @if (ViewBag.EducationLevels != null)
                                {
                                    foreach (var edu in ViewBag.EducationLevels)
                                    {
                                        <option value="@edu.Name"></option>
                                    }
                                }
                            </datalist>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-12 mb-3">
                             <label asp-for="ProfessionalProfile" class="form-label text-muted small">Professional Profile</label>
                             <textarea asp-for="ProfessionalProfile" class="form-control form-control-premium" rows="3" placeholder="Brief professional summary..."></textarea>
                        </div>
                    </div>

                    <div class="d-flex justify-content-end mt-4 pt-3 border-top border-secondary">
                        <a asp-action="Index" class="btn btn-outline-light me-2">Cancel</a>
                        <button type="submit" class="btn btn-premium px-4">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
